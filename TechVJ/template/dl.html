<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" href="https://i.ibb.co/qJyZWCv/20230629-081948-0000.png" type="image/x-icon">
    <meta property="og:image" content="https://i.ibb.co/qJyZWCv/20230629-081948-0000.png" itemprop="thumbnailUrl">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{file_name}} | Tech VJ</title>

    <!-- UI / CSS libs (kept original ones you had) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Delius">
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Video.js styles -->
    <link href="https://vjs.zencdn.net/8.9.0/video-js.css" rel="stylesheet" />

    <!-- Optional: http-source-selector plugin style (quality menu) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/videojs-http-source-selector@1.1.7/dist/videojs-http-source-selector.css" />

    <style>
        /* small theme tweaks to blend with your dark layout */
        .vjs-techvj .vjs-control-bar { background: rgba(0,0,0,0.55) !important; }
        .vjs-techvj .vjs-big-play-button {
            background: linear-gradient(45deg, #21a0ff, #ff5cac);
            border: none !important;
            border-radius: 10px !important;
            width: 72px !important;
            height: 48px !important;
        }
        /* make the player container match your layout */
        .player-wrap { padding: 18px; background: transparent; }
    </style>
</head>

<body class="bg-black text-light">
    <!-- --- Keep your original header/nav unchanged (kept from uploaded file) --- -->
    <header> 
      <!-- (the same navbar content as in original file) -->
      <nav class="navbar bg-dark p-lg-4 p-2">
        <div class="d-flex ">
          <!-- ... original navbar content ... -->
          <div class="container-fluid">
            <a class="navbar-brand text-light fw-bold" href="https://t.me/vj_bots">
              <span class="bg-clip-text sm:text-[25px] text-[22px] text-transparent bg-gradient-to-r from-pink-500 to-violet-500">
                For Movies
              </span>
            </a>
          </div>
        </div>
      </nav>
    </header>

    <div class="bg-black text-light">
        <!-- file name -->
        <div class="justify-content-center align-items-center w-100 d-flex">
            <div id="file-name" class="tex-center text-lg max:w-74 p-2 flex-wrap text-center justify-center items-center">
                <p class="fw-bold">
                    <span id="myDiv" class="h6 flex-wrap text-center justify-center items-center card-title wow animate__animated animate__fadeInRight">
                        {{file_name}}
                    </span>
                </p>
            </div>
        </div>

        <!-- VIDEO.JS PLAYER -->
        <div class="justify-content-center align-items-center w-100 d-flex flex-wrap">
            <div class="lg:w-9/12 lg:px-12 lg:py-4 w-full border border-danger wow animate__animated animate__fadeInLeft player-wrap">
                <!-- video.js element (no autoplay) -->
                <video
                    id="videojs-player"
                    class="video-js vjs-techvj vjs-big-play-centered"
                    controls
                    preload="auto"
                    playsinline
                    width="100%"
                    height="auto"
                    data-setup='{}'
                >
                    <!-- primary source (works for mp4). If you serve HLS (.m3u8) it will also work -->
                    <source src="{{file_url}}" type="video/mp4" />
                    <!-- fallback text -->
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>

        <!-- External player buttons (kept as original) -->
        <div class="justify-content-center align-items-center w-100 d-flex">
            <div class="row d-flex w-100 justify-content-center align-items-center">
                <div class="col-lg-7 col-12 d-flex justify-content-start align-items-center ">
                    <p class="h4 px-2 mt-4 bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 to-orange-600 font-bold mb-2">Play with...</p>
                </div>
                <div class="col-lg-6 col-10 d-flex justify-center items-center flex-wrap pb-3 gap-2 wow animate__animated animate__fadeIn">
                    <div onclick="vlc_player()" class="card card-body col-lg-3 col-5 bg-dark text-secondary text-center">VLC Player</div>
                    <div onclick="mx_player()" class="card card-body col-lg-3 col-5 bg-dark text-secondary text-center">Mx Player</div>
                    <div onclick="playit_player()" class="card card-body col-lg-3 col-5 bg-dark text-secondary text-center">Play-it</div>
                    <div onclick="km_player()" class="card card-body col-lg-3 col-5 bg-dark text-secondary text-center">km Player</div>
                    <!-- ... rest of your buttons ... -->
                </div>
            </div>
        </div>

        <!-- keep the remainder of your page (download notices, footer, etc.) unchanged -->
        <!-- (rest of original page) -->
    </div>

    <footer class="bg-dark justify-content-around align-items-center">
      <!-- (original footer from your file) -->
    </footer>

    <!-- -------- SCRIPTS -------- -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Video.js core -->
    <script src="https://vjs.zencdn.net/8.9.0/video.min.js"></script>

    <!-- Optional: quality selector plugin and its small deps -->
    <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-quality-levels@2.0.9/dist/videojs-contrib-quality-levels.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-http-source-selector@1.1.7/dist/videojs-http-source-selector.min.js"></script>

    <script>
        // Initialize video.js player
        const player = videojs('videojs-player', {
            controls: true,
            autoplay: false,   // explicitly disable autoplay
            preload: 'auto',
            fluid: true,       // responsive
            playbackRates: [0.5, 1, 1.25, 1.5, 2], // speed control
            controlBar: {
                volumePanel: { inline: false }
            }
        });

        // Try to enable http source selector (quality menu) if available
        // This works best for HLS (m3u8) or multi-source manifests. For single mp4 it will simply not show alternatives.
        if (player.httpSourceSelector) {
            player.httpSourceSelector();
            // Move the source selector into the control bar
            player.getChild('controlBar').addChild('SourceMenuButton', {});
        }

        // Keyboard support: video.js includes basic keyboard shortcuts by default.
        // Additional keyboard customizations (example: space=play/pause)
        player.ready(() => {
            // ensure space toggles play/pause
            document.addEventListener('keydown', function (e) {
                // ignore if focus is on input
                if (['INPUT','TEXTAREA'].includes(document.activeElement.tagName)) return;
                if (e.code === 'Space') {
                    e.preventDefault();
                    if (player.paused()) player.play(); else player.pause();
                }
                // you can add more keys if you want
            });
        });

        // External player handlers (open via intent/uri) - adjust as needed
        function vlc_player() {
            // on desktop this will do nothing if vlc:// is not handled
            window.location.href = 'vlc://' + '{{file_url}}';
        }
        function mx_player() {
            window.location.href = 'intent:' + '{{file_url}}' + '#Intent;package=com.mxtech.videoplayer.ad;end';
        }
        function playit_player() {
            window.location.href = 'playit://play?url=' + '{{file_url}}';
        }
        function km_player() {
            window.location.href = 'kmplayer://' + '{{file_url}}';
        }
    </script>

    <!-- remove Plyr init from original file (we replaced it) -->
    <!-- keep your other scripts like WOW animations if present -->
    <script src="js/wow.min.js"></script>
    <script> if (typeof WOW !== 'undefined') new WOW().init(); </script>

    <!-- scripts for right-click / key blocking from original file (kept) -->
    <script>
        document.addEventListener("contextmenu", function (e) { e.preventDefault(); });
        document.addEventListener('keydown', function (e) {
            if ( e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || (e.ctrlKey && e.key === 'u') ) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
